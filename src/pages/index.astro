---
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";
import GithubLogo from "phosphor-astro/GithubLogo.astro";
import LinkedinLogo from "phosphor-astro/LinkedinLogo.astro";
import FormattedDate from "src/components/FormattedDate.astro";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<Layout title={SITE_TITLE} description={SITE_DESCRIPTION}>
  <div class="flex flex-col gap-y-20 py-20">
    <!-- Hero section -->
    <section class="flex flex-col gap-y-6 text-center">
      <h1 class="text-5xl font-light tracking-tight">Martin Ryberg Laude</h1>
      <p class="mx-auto max-w-2xl text-lg text-neutral-900">
        Swedish guy passionate about software, design, and anything inbetween.
      </p>
      <div class="flex justify-center gap-2">
        <a
          href="https://github.com/martinryberglaude"
          class="text-md inline-flex min-w-30 items-center justify-center gap-2 rounded-sm bg-black p-2 font-extralight text-white hover:underline"
        >
          <GithubLogo class="w-4" />
          Github
        </a>
        <a
          href="https://www.linkedin.com/in/martinryberglaude/"
          class="text-md inline-flex min-w-30 items-center justify-center gap-2 rounded-sm border border-black bg-white p-2 font-light text-black hover:underline"
        >
          <LinkedinLogo class="w-5" />
          LinkedIn
        </a>
      </div>
    </section>

    <section class="flex flex-col gap-y-6">
      <h2 class="font-regular ml-6 text-2xl">Articles</h2>
      <ul class="flex flex-col gap-6">
        {
          posts.slice(0, 3).map((post) => (
            <li>
              <a
                href={`/articles/${post.id}`}
                class="group block rounded-lg border-2 border-black bg-white p-6 transition hover:cursor-pointer"
              >
                <div class="flex items-start justify-between">
                  <h3 class="mb-2 text-lg group-hover:underline">
                    &gt; {post.data.title}
                  </h3>
                  <FormattedDate date={post.data.pubDate} />
                </div>
                <p class="text-md text-black">{post.data.description}</p>
              </a>
            </li>
          ))
        }
      </ul>
      <div class="relative ml-6 inline-flex">
        <a
          href="/articles"
          class="relative flex items-center gap-2 text-lg hover:underline"
        >
          <span
            class="absolute inset-x-0 bottom-0 -z-10 h-[50%] bg-[#7FFF00]/30"
          ></span>
          All posts â†’
        </a>
      </div>
    </section>
  </div>
</Layout>
